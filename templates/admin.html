<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500&display=swap" rel="stylesheet">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">   
</head>
<body>
  <nav class="sidebar">
    <h3>GCBD</h3>
    <ul class="nav">
      {% if user.has_permission('employee_m') %}
        <li><a href="/employee_m"><i class="fas fa-users"></i> Employee Management</a></li>
      {% else %}
        <li><a href="#" class="disabled"><i class="fas fa-users"></i> Employee Management</a></li>
      {% endif %}
      
      {% if user.has_permission('site_m') %}
        <li><a href="/site_m"><i class="fas fa-building"></i> Site Management</a></li>
      {% else %}
        <li><a href="#" class="disabled"><i class="fas fa-building"></i> Site Management</a></li>
      {% endif %}
      
      {% if user.has_permission('admin_m') %}
        <li><a href="/admin_m"><i class="fas fa-user-shield"></i> Admin Management</a></li>
      {% else %}
        <li><a href="#" class="disabled"><i class="fas fa-user-shield"></i> Admin Management</a></li>
      {% endif %}
      
      {% if user.has_permission('labour_m') %}
        <li><a href="/labour_m"><i class="fas fa-hard-hat"></i> Labour Management</a></li>
      {% else %}
        <li><a href="#" class="disabled"><i class="fas fa-hard-hat"></i> Labour Management</a></li>
      {% endif %}
    </ul>
    
    <div class="logout-section">
      <a href="/logout" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
  </nav>
  
  <section class="main">
    <div class="user-info">
      <h2>Welcome, {{ user.username }}</h2>
      <p>
        {% if user.is_super_admin %}
          <span class="permission-badge super-admin-badge">Super Administrator</span>
        {% else %}
          <strong>Permissions:</strong>
          {% if user.can_access_site_m %}
            <span class="permission-badge">Site Management</span>
          {% endif %}
          {% if user.can_access_employee_m %}
            <span class="permission-badge">Employee Management</span>
          {% endif %}
          {% if user.can_access_labour_m %}
            <span class="permission-badge">Labour Management</span>
          {% endif %}
          {% if user.can_access_admin_m %}
            <span class="permission-badge">Admin Management</span>
          {% endif %}

        {% endif %}
      </p>
    </div>
    
    <div class="cards">
      <div class="card">
        <h3>{{ stats.total_labour if stats and stats.total_labour is not none else 0 }}</h3>
        <p>Total Labour</p>
      </div>
      <div class="card">
        <h3>{{ stats.total_employees if stats and stats.total_employees is not none else 0 }}</h3>
        <p>Total Employee</p>
      </div>
      <div class="card">
        <h3>{{ stats.active_sites if stats and stats.active_sites is not none else 0 }}</h3>
        <p>Active Sites</p>
      </div>
      <button class="card card-button" onclick="location.href='/report'">
        <i class="fas fa-chart-bar"></i> Report Analytics
      </button>
    </div>
  </section>
</body>
</html>